<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"shakudada.xyz","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"appID":"79C1GXGOC6","apiKey":"225fa4bf2bc37c3e46a671682674fe37","indexName":"my-hexo-blog","hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="dinosaur">
<meta property="og:url" content="https://shakudada.xyz/page/3/index.html">
<meta property="og:site_name" content="dinosaur">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="dinosaur">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://shakudada.xyz/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>dinosaur</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">dinosaur</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container"></div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="algolia-results">
  <div id="algolia-stats"></div>
  <div id="algolia-hits"></div>
  <div id="algolia-pagination" class="algolia-pagination"></div>
</div>

      
    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://shakudada.xyz/2023/08/15/mybatisplus-Column-status-cannot-be-null/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="dinosaur">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dinosaur">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/08/15/mybatisplus-Column-status-cannot-be-null/" class="post-title-link" itemprop="url">mybatisplus Column 'xxx' cannot be null</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-08-15 20:17:31" itemprop="dateCreated datePublished" datetime="2023-08-15T20:17:31+08:00">2023-08-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-10-25 11:42:47" itemprop="dateModified" datetime="2023-10-25T11:42:47+08:00">2023-10-25</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>有下面的表:<br>crated_at是自动由mysql填充的,但是使用mybatisplus的BatchSave的时候,发现<br><code>Column &#39;created_at&#39; cannot be null</code> </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">CREATE TABLE `table` (</span><br><span class="line">  `id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT &#x27;自增id&#x27;,</span><br><span class="line">  `status` VARCHAR(100) NOT NULL AUTO_INCREMENT COMMENT &#x27;状态&#x27;,</span><br><span class="line">  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#x27;创建时间&#x27;,</span><br><span class="line">  `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT &#x27;更新时间&#x27;,</span><br><span class="line">  PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci</span><br></pre></td></tr></table></figure>

<p>mybatisplus生成的sql大概是把created_at 也作为sql字段然后拼入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into table  (status , created_at,updated_at) values (1 , null ,null) </span><br></pre></td></tr></table></figure>
<p>也就是没有过滤掉空值</p>
<h2 id="排查原因"><a href="#排查原因" class="headerlink" title="排查原因"></a>排查原因</h2><p>一开始找这个文档<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_40093255/article/details/125796712">相关文档</a><br>发现加了下面注解<br><code>@TableField(insertStrategy = FieldStrategy.IGNORED)</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">@Data</span><br><span class="line">@TableName(&quot;table&quot;)</span><br><span class="line">public class TableDO &#123;</span><br><span class="line">    /**</span><br><span class="line">     * 自增id</span><br><span class="line">     */</span><br><span class="line">    @TableId(value = &quot;id&quot;, type = IdType.AUTO)</span><br><span class="line">    private Integer id;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 状态 , WRITE_TO_DB   RESUME_FROM_DB</span><br><span class="line">     */</span><br><span class="line">    private String status;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 延迟发送时间</span><br><span class="line">     */</span><br><span class="line">    private Date delayAt;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 创建时间</span><br><span class="line">     */</span><br><span class="line">     @TableField(insertStrategy = FieldStrategy.IGNORED)  // 没有生效</span><br><span class="line">    private Date createdAt;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 更新时间</span><br><span class="line">     */</span><br><span class="line"></span><br><span class="line">    private Date updatedAt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>发现没有生效 , 然后一直改<code>@TableName</code> , 连这个注解也没有生效,所以发现是整个mybatisplus的注解都没有生效</p>
<h2 id="排查"><a href="#排查" class="headerlink" title="排查"></a>排查</h2><p>根据上面现象,再继续排查,发现是idea自动生成的xml优先级更高,有resultMap ,把整个xml清空之后,整个insert正常了,最后sql变成了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into table  (status ) values (1 ) </span><br></pre></td></tr></table></figure>

<h2 id="相关阅读"><a href="#相关阅读" class="headerlink" title="相关阅读"></a>相关阅读</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/kuangdaoyizhimei/p/15965206.html">https://www.cnblogs.com/kuangdaoyizhimei/p/15965206.html</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://shakudada.xyz/2023/08/15/java-juc/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="dinosaur">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dinosaur">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/08/15/java-juc/" class="post-title-link" itemprop="url">java juc</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-08-15 11:54:44" itemprop="dateCreated datePublished" datetime="2023-08-15T11:54:44+08:00">2023-08-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-10-27 09:55:51" itemprop="dateModified" datetime="2023-10-27T09:55:51+08:00">2023-10-27</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>了解java容器类</p>
<h2 id="juc主要类"><a href="#juc主要类" class="headerlink" title="juc主要类"></a>juc主要类</h2><p>Collection 接口:</p>
<table>
<thead>
<tr>
<th>类</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>List</td>
<td>列表</td>
</tr>
<tr>
<td>Queue</td>
<td>队列</td>
</tr>
<tr>
<td>Set</td>
<td>集合</td>
</tr>
</tbody></table>
<p>Map接口:</p>
<table>
<thead>
<tr>
<th>类</th>
<th>描述</th>
<th>线程安全</th>
<th>是否可以由null值</th>
</tr>
</thead>
<tbody><tr>
<td>HashMap</td>
<td>hanshmap</td>
<td>否</td>
<td>是</td>
</tr>
<tr>
<td>PriorityQueue</td>
<td>优先队列,implement Queue</td>
<td>否</td>
<td>否,因为要排序,null会抛异常</td>
</tr>
<tr>
<td>HashSet</td>
<td>一个set的实现</td>
<td>否</td>
<td>是 <a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/8/docs/api/java/util/HashSet.html">This class permits the null element.</a></td>
</tr>
</tbody></table>
<h3 id="aqs"><a href="#aqs" class="headerlink" title="aqs"></a>aqs</h3><p>aqs 主要是提供了三个property:</p>
<ul>
<li>state: int 表示资源 ,维护一个volatile 的int</li>
<li>queue: 来block队列,一个普通队列,用来塞线程Thread这个变量</li>
<li>block: 获取不到资源就阻塞 , 使用park和unpark, jni实现</li>
</ul>
<h2 id="block"><a href="#block" class="headerlink" title="block"></a>block</h2><p>park 和unpark 使用的是pthread_cond_wait 和pthread_cond_notify</p>
<h3 id="park-源码分析"><a href="#park-源码分析" class="headerlink" title="park 源码分析"></a>park 源码分析</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">// Parker::park decrements count if &gt; 0, else does a condvar wait.  Unpark</span><br><span class="line">// sets count to 1 and signals condvar.  Only one thread ever waits</span><br><span class="line">// on the condvar. Contention seen when trying to park implies that someone</span><br><span class="line">// is unparking you, so don&#x27;t wait. And spurious returns are fine, so there</span><br><span class="line">// is no need to track notifications.</span><br><span class="line"></span><br><span class="line">void Parker::park(bool isAbsolute, jlong time) &#123;</span><br><span class="line"></span><br><span class="line">  // Optional fast-path check:</span><br><span class="line">  // Return immediately if a permit is available.</span><br><span class="line">  // We depend on Atomic::xchg() having full barrier semantics</span><br><span class="line">  // since we are doing a lock-free update to _counter.</span><br><span class="line">  if (Atomic::xchg(&amp;_counter, 0) &gt; 0) return;</span><br><span class="line"></span><br><span class="line">  JavaThread *jt = JavaThread::current();</span><br><span class="line"></span><br><span class="line">  // Optional optimization -- avoid state transitions if there&#x27;s</span><br><span class="line">  // an interrupt pending.</span><br><span class="line">  if (jt-&gt;is_interrupted(false)) &#123;</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // Next, demultiplex/decode time arguments</span><br><span class="line">  struct timespec absTime;</span><br><span class="line">  if (time &lt; 0 || (isAbsolute &amp;&amp; time == 0)) &#123; // don&#x27;t wait at all</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  if (time &gt; 0) &#123;</span><br><span class="line">    to_abstime(&amp;absTime, time, isAbsolute, false);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // Enter safepoint region</span><br><span class="line">  // Beware of deadlocks such as 6317397.</span><br><span class="line">  // The per-thread Parker:: mutex is a classic leaf-lock.</span><br><span class="line">  // In particular a thread must never block on the Threads_lock while</span><br><span class="line">  // holding the Parker:: mutex.  If safepoints are pending both the</span><br><span class="line">  // the ThreadBlockInVM() CTOR and DTOR may grab Threads_lock.</span><br><span class="line">  ThreadBlockInVM tbivm(jt);</span><br><span class="line"></span><br><span class="line">  // Can&#x27;t access interrupt state now that we are _thread_blocked. If we&#x27;ve</span><br><span class="line">  // been interrupted since we checked above then _counter will be &gt; 0.</span><br><span class="line"></span><br><span class="line">  // Don&#x27;t wait if cannot get lock since interference arises from</span><br><span class="line">  // unparking.</span><br><span class="line">  if (pthread_mutex_trylock(_mutex) != 0) &#123;</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  int status;</span><br><span class="line">  if (_counter &gt; 0)  &#123; // no wait needed</span><br><span class="line">    _counter = 0;</span><br><span class="line">    status = pthread_mutex_unlock(_mutex);</span><br><span class="line">    assert_status(status == 0, status, &quot;invariant&quot;);</span><br><span class="line">    // Paranoia to ensure our locked and lock-free paths interact</span><br><span class="line">    // correctly with each other and Java-level accesses.</span><br><span class="line">    OrderAccess::fence();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  OSThreadWaitState osts(jt-&gt;osthread(), false /* not Object.wait() */);</span><br><span class="line"></span><br><span class="line">  assert(_cur_index == -1, &quot;invariant&quot;);</span><br><span class="line">  if (time == 0) &#123;</span><br><span class="line">    _cur_index = REL_INDEX; // arbitrary choice when not timed</span><br><span class="line">    status = pthread_cond_wait(&amp;_cond[_cur_index], _mutex);</span><br><span class="line">    assert_status(status == 0 MACOS_ONLY(|| status == ETIMEDOUT),</span><br><span class="line">                  status, &quot;cond_wait&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  else &#123;</span><br><span class="line">    _cur_index = isAbsolute ? ABS_INDEX : REL_INDEX;</span><br><span class="line">    status = pthread_cond_timedwait(&amp;_cond[_cur_index], _mutex, &amp;absTime);</span><br><span class="line">    assert_status(status == 0 || status == ETIMEDOUT,</span><br><span class="line">                  status, &quot;cond_timedwait&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  _cur_index = -1;</span><br><span class="line"></span><br><span class="line">  _counter = 0;</span><br><span class="line">  status = pthread_mutex_unlock(_mutex);</span><br><span class="line">  assert_status(status == 0, status, &quot;invariant&quot;);</span><br><span class="line">  // Paranoia to ensure our locked and lock-free paths interact</span><br><span class="line">  // correctly with each other and Java-level accesses.</span><br><span class="line">  OrderAccess::fence();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="相关阅读"><a href="#相关阅读" class="headerlink" title="相关阅读"></a>相关阅读</h2><ul>
<li><a target="_blank" rel="noopener" href="https://gee.cs.oswego.edu/dl/papers/aqs.pdf">aqs论文</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E19455-01/806-5257/6je9h032r/index.html">https://docs.oracle.com/cd/E19455-01/806-5257/6je9h032r/index.html</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://shakudada.xyz/2023/08/10/jdbc-Communications-link-failure/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="dinosaur">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dinosaur">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/08/10/jdbc-Communications-link-failure/" class="post-title-link" itemprop="url">jdbc Communications link failure</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-08-10 15:23:22" itemprop="dateCreated datePublished" datetime="2023-08-10T15:23:22+08:00">2023-08-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-10-25 11:42:47" itemprop="dateModified" datetime="2023-10-25T11:42:47+08:00">2023-10-25</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>本地电脑连接测试环境mysql,发现如下错误<code>Communications link failure</code></p>
<p>测试环境jdbc连不上,最后发现是网络原因,不允许外网访问测试环境的mysql,找运维改了规则就而已访问了</p>
<h2 id="堆栈"><a href="#堆栈" class="headerlink" title="堆栈"></a>堆栈</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br></pre></td><td class="code"><pre><span class="line">[ERROR] 2023-08-10 15:01:16:468 [ip:] [TID: N/A] [main] [com.alibaba.druid.pool.DruidDataSource:916] [init] =&gt; init datasource error, url: jdbc:mysql://xxx.com/ods?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false&amp;serverTimezone=UTC&amp;allowMultiQueries=true</span><br><span class="line">com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure</span><br><span class="line"></span><br><span class="line">The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.</span><br><span class="line">	at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174)</span><br><span class="line">	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)</span><br><span class="line">	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:835)</span><br><span class="line">	at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:455)</span><br><span class="line">	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:240)</span><br><span class="line">	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:199)</span><br><span class="line">	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:156)</span><br><span class="line">	at com.alibaba.druid.filter.stat.StatFilter.connection_connect(StatFilter.java:218)</span><br><span class="line">	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)</span><br><span class="line">	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1646)</span><br><span class="line">	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1710)</span><br><span class="line">	at com.alibaba.druid.pool.DruidDataSource.init(DruidDataSource.java:912)</span><br><span class="line">	at com.baomidou.dynamic.datasource.creator.DruidDataSourceCreator.doCreateDataSource(DruidDataSourceCreator.java:83)</span><br><span class="line">	at com.baomidou.dynamic.datasource.creator.AbstractDataSourceCreator.createDataSource(AbstractDataSourceCreator.java:70)</span><br><span class="line">	at com.baomidou.dynamic.datasource.creator.DefaultDataSourceCreator.createDataSource(DefaultDataSourceCreator.java:48)</span><br><span class="line">	at com.baomidou.dynamic.datasource.provider.AbstractDataSourceProvider.createDataSourceMap(AbstractDataSourceProvider.java:47)</span><br><span class="line">	at com.baomidou.dynamic.datasource.provider.YmlDynamicDataSourceProvider.loadDataSources(YmlDynamicDataSourceProvider.java:42)</span><br><span class="line">	at com.baomidou.dynamic.datasource.DynamicRoutingDataSource.afterPropertiesSet(DynamicRoutingDataSource.java:219)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1858)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1795)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:594)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:516)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:324)</span><br><span class="line">	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)</span><br><span class="line">	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)</span><br><span class="line">	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1307)</span><br><span class="line">	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1227)</span><br><span class="line">	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:886)</span><br><span class="line">	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:790)</span><br><span class="line">	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:540)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1341)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1181)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:556)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:516)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:324)</span><br><span class="line">	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)</span><br><span class="line">	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)</span><br><span class="line">	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1307)</span><br><span class="line">	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1227)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireByType(AbstractAutowireCapableBeanFactory.java:1514)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1409)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:593)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:516)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:324)</span><br><span class="line">	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)</span><br><span class="line">	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)</span><br><span class="line">	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1307)</span><br><span class="line">	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1227)</span><br><span class="line">	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:657)</span><br><span class="line">	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:640)</span><br><span class="line">	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)</span><br><span class="line">	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1425)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:593)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:516)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:324)</span><br><span class="line">	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)</span><br><span class="line">	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)</span><br><span class="line">	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1307)</span><br><span class="line">	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1227)</span><br><span class="line">	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:657)</span><br><span class="line">	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:640)</span><br><span class="line">	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)</span><br><span class="line">	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1425)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:593)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:516)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:324)</span><br><span class="line">	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)</span><br><span class="line">	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)</span><br><span class="line">	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1307)</span><br><span class="line">	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1227)</span><br><span class="line">	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:657)</span><br><span class="line">	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:640)</span><br><span class="line">	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)</span><br><span class="line">	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1425)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:593)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:516)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:324)</span><br><span class="line">	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)</span><br><span class="line">	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:897)</span><br><span class="line">	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:879)</span><br><span class="line">	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:551)</span><br><span class="line">	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:755)</span><br><span class="line">	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:747)</span><br><span class="line">	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:402)</span><br><span class="line">	at org.springframework.boot.SpringApplication.run(SpringApplication.java:312)</span><br><span class="line">	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:120)</span><br><span class="line">	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)</span><br><span class="line">	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124)</span><br><span class="line">	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:123)</span><br><span class="line">	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190)</span><br><span class="line">	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132)</span><br><span class="line">	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:244)</span><br><span class="line">	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:227)</span><br><span class="line">	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:289)</span><br><span class="line">	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)</span><br><span class="line">	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:291)</span><br><span class="line">	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:246)</span><br><span class="line">	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)</span><br><span class="line">	at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)</span><br><span class="line">	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)</span><br><span class="line">	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)</span><br><span class="line">	at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)</span><br><span class="line">	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)</span><br><span class="line">	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)</span><br><span class="line">	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)</span><br><span class="line">	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)</span><br><span class="line">	at org.junit.runners.ParentRunner.run(ParentRunner.java:413)</span><br><span class="line">	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)</span><br><span class="line">	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)</span><br><span class="line">	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)</span><br><span class="line">	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)</span><br><span class="line">	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)</span><br><span class="line">	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)</span><br><span class="line">	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)</span><br><span class="line">	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)</span><br><span class="line">Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure</span><br><span class="line"></span><br><span class="line">The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.</span><br><span class="line">	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)</span><br><span class="line">	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)</span><br><span class="line">	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)</span><br><span class="line">	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)</span><br><span class="line">	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)</span><br><span class="line">	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)</span><br><span class="line">	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151)</span><br><span class="line">	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:167)</span><br><span class="line">	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:91)</span><br><span class="line">	at com.mysql.cj.NativeSession.connect(NativeSession.java:152)</span><br><span class="line">	at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:955)</span><br><span class="line">	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:825)</span><br><span class="line">	... 127 common frames omitted</span><br><span class="line">Caused by: java.net.ConnectException: Connection timed out: connect</span><br><span class="line">	at java.base/java.net.PlainSocketImpl.waitForConnect(Native Method)</span><br><span class="line">	at java.base/java.net.PlainSocketImpl.socketConnect(PlainSocketImpl.java:107)</span><br><span class="line">	at java.base/java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:399)</span><br><span class="line">	at java.base/java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:242)</span><br><span class="line">	at java.base/java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:224)</span><br><span class="line">	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:403)</span><br><span class="line">	at java.base/java.net.Socket.connect(Socket.java:591)</span><br><span class="line">	at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:155)</span><br><span class="line">	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:65)</span><br><span class="line">	... 130 common frames omitted</span><br><span class="line">[ERROR] 2023-08-10 15:01:16:472 [ip:] [TID: N/A] [main] [com.alibaba.druid.pool.DruidDataSource:958] [init] =&gt; &#123;dataSource-2&#125; init error</span><br><span class="line">com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure</span><br><span class="line"></span><br><span class="line">The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.</span><br><span class="line">	at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174)</span><br><span class="line">	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)</span><br><span class="line">	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:835)</span><br><span class="line">	at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:455)</span><br><span class="line">	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:240)</span><br><span class="line">	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:199)</span><br><span class="line">	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:156)</span><br><span class="line">	at com.alibaba.druid.filter.stat.StatFilter.connection_connect(StatFilter.java:218)</span><br><span class="line">	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)</span><br><span class="line">	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1646)</span><br><span class="line">	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1710)</span><br><span class="line">	at com.alibaba.druid.pool.DruidDataSource.init(DruidDataSource.java:912)</span><br><span class="line">	at com.baomidou.dynamic.datasource.creator.DruidDataSourceCreator.doCreateDataSource(DruidDataSourceCreator.java:83)</span><br><span class="line">	at com.baomidou.dynamic.datasource.creator.AbstractDataSourceCreator.createDataSource(AbstractDataSourceCreator.java:70)</span><br><span class="line">	at com.baomidou.dynamic.datasource.creator.DefaultDataSourceCreator.createDataSource(DefaultDataSourceCreator.java:48)</span><br><span class="line">	at com.baomidou.dynamic.datasource.provider.AbstractDataSourceProvider.createDataSourceMap(AbstractDataSourceProvider.java:47)</span><br><span class="line">	at com.baomidou.dynamic.datasource.provider.YmlDynamicDataSourceProvider.loadDataSources(YmlDynamicDataSourceProvider.java:42)</span><br><span class="line">	at com.baomidou.dynamic.datasource.DynamicRoutingDataSource.afterPropertiesSet(DynamicRoutingDataSource.java:219)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1858)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1795)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:594)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:516)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:324)</span><br><span class="line">	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)</span><br><span class="line">	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)</span><br><span class="line">	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1307)</span><br><span class="line">	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1227)</span><br><span class="line">	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:886)</span><br><span class="line">	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:790)</span><br><span class="line">	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:540)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1341)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1181)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:556)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:516)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:324)</span><br><span class="line">	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)</span><br><span class="line">	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)</span><br><span class="line">	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1307)</span><br><span class="line">	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1227)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireByType(AbstractAutowireCapableBeanFactory.java:1514)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1409)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:593)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:516)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:324)</span><br><span class="line">	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)</span><br><span class="line">	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)</span><br><span class="line">	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1307)</span><br><span class="line">	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1227)</span><br><span class="line">	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:657)</span><br><span class="line">	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:640)</span><br><span class="line">	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)</span><br><span class="line">	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1425)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:593)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:516)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:324)</span><br><span class="line">	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)</span><br><span class="line">	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)</span><br><span class="line">	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1307)</span><br><span class="line">	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1227)</span><br><span class="line">	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:657)</span><br><span class="line">	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:640)</span><br><span class="line">	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)</span><br><span class="line">	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1425)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:593)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:516)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:324)</span><br><span class="line">	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)</span><br><span class="line">	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)</span><br><span class="line">	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1307)</span><br><span class="line">	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1227)</span><br><span class="line">	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:657)</span><br><span class="line">	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:640)</span><br><span class="line">	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)</span><br><span class="line">	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1425)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:593)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:516)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:324)</span><br><span class="line">	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322)</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)</span><br><span class="line">	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:897)</span><br><span class="line">	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:879)</span><br><span class="line">	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:551)</span><br><span class="line">	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:755)</span><br><span class="line">	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:747)</span><br><span class="line">	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:402)</span><br><span class="line">	at org.springframework.boot.SpringApplication.run(SpringApplication.java:312)</span><br><span class="line">	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:120)</span><br><span class="line">	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)</span><br><span class="line">	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124)</span><br><span class="line">	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:123)</span><br><span class="line">	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190)</span><br><span class="line">	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132)</span><br><span class="line">	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:244)</span><br><span class="line">	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:227)</span><br><span class="line">	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:289)</span><br><span class="line">	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)</span><br><span class="line">	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:291)</span><br><span class="line">	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:246)</span><br><span class="line">	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)</span><br><span class="line">	at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)</span><br><span class="line">	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)</span><br><span class="line">	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)</span><br><span class="line">	at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)</span><br><span class="line">	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)</span><br><span class="line">	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)</span><br><span class="line">	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)</span><br><span class="line">	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)</span><br><span class="line">	at org.junit.runners.ParentRunner.run(ParentRunner.java:413)</span><br><span class="line">	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)</span><br><span class="line">	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)</span><br><span class="line">	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)</span><br><span class="line">	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)</span><br><span class="line">	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)</span><br><span class="line">	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)</span><br><span class="line">	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)</span><br><span class="line">	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)</span><br><span class="line">Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure</span><br><span class="line"></span><br><span class="line">The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.</span><br><span class="line">	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)</span><br><span class="line">	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)</span><br><span class="line">	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)</span><br><span class="line">	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)</span><br><span class="line">	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)</span><br><span class="line">	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)</span><br><span class="line">	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151)</span><br><span class="line">	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:167)</span><br><span class="line">	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:91)</span><br><span class="line">	at com.mysql.cj.NativeSession.connect(NativeSession.java:152)</span><br><span class="line">	at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:955)</span><br><span class="line">	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:825)</span><br><span class="line">	... 127 common frames omitted</span><br><span class="line">Caused by: java.net.ConnectException: Connection timed out: connect</span><br><span class="line">	at java.base/java.net.PlainSocketImpl.waitForConnect(Native Method)</span><br><span class="line">	at java.base/java.net.PlainSocketImpl.socketConnect(PlainSocketImpl.java:107)</span><br><span class="line">	at java.base/java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:399)</span><br><span class="line">	at java.base/java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:242)</span><br><span class="line">	at java.base/java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:224)</span><br><span class="line">	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:403)</span><br><span class="line">	at java.base/java.net.Socket.connect(Socket.java:591)</span><br><span class="line">	at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:155)</span><br><span class="line">	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:65)</span><br><span class="line">	... 130 common frames omitted</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://shakudada.xyz/2023/08/04/java-nio/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="dinosaur">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dinosaur">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/08/04/java-nio/" class="post-title-link" itemprop="url">java nio</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-08-04 22:04:41" itemprop="dateCreated datePublished" datetime="2023-08-04T22:04:41+08:00">2023-08-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-10-25 11:42:47" itemprop="dateModified" datetime="2023-10-25T11:42:47+08:00">2023-10-25</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>了解java的nio，因为在看到lucene的MappedByteBuffer , 所以想了解一下nio的内容<br>nio 主要包括三个内容: </p>
<ul>
<li>Buffer</li>
<li>Selector</li>
<li>Channel</li>
</ul>
<h2 id="Buffer"><a href="#Buffer" class="headerlink" title="Buffer"></a>Buffer</h2><h3 id="ByteBuffer"><a href="#ByteBuffer" class="headerlink" title="ByteBuffer"></a>ByteBuffer</h3><ul>
<li>MappedByteBuffer</li>
<li>HeapByteBuffer</li>
<li>DirectByteBuffer</li>
</ul>
<h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><p>简单的例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void fileChannel()</span><br><span class="line">        throws IOException &#123;</span><br><span class="line">    try (FileChannel fc = FileChannel.open(Paths.get(&quot;ccc.cc&quot;),StandardOpenOption.WRITE , StandardOpenOption.READ ,StandardOpenOption.CREATE) ) &#123;</span><br><span class="line">        MappedByteBuffer bb = fc.map(FileChannel.MapMode.READ_WRITE, 0, 1);</span><br><span class="line">        byte b = 97;</span><br><span class="line">        bb.put(0 ,b  );</span><br><span class="line">        fc.write(bb);</span><br><span class="line">        var charset = Charset.defaultCharset();</span><br><span class="line">        System.out.println( &quot;res&quot; + charset.decode(bb).toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其实调用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">@ForceInline</span><br><span class="line">public void put$Type$(Scope scope, Object base, long offset, $type$ value) &#123;</span><br><span class="line">    try &#123;</span><br><span class="line">        put$Type$Internal(scope, base, offset, value);</span><br><span class="line">    &#125; catch (Scope.ScopedAccessError ex) &#123;</span><br><span class="line">        throw new IllegalStateException(&quot;This segment is already closed&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@ForceInline @Scoped</span><br><span class="line">private void put$Type$Internal(Scope scope, Object base, long offset, $type$ value) &#123;</span><br><span class="line">    try &#123;</span><br><span class="line">        if (scope != null) &#123;</span><br><span class="line">            scope.checkValidState();</span><br><span class="line">        &#125;</span><br><span class="line">        UNSAFE.put$Type$(base, offset, value);</span><br><span class="line">    &#125; finally &#123;</span><br><span class="line">        Reference.reachabilityFence(scope);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最后写在这里</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">void put(T x) &#123;</span><br><span class="line">  GuardUnsafeAccess guard(_thread);</span><br><span class="line">  *addr() = normalize_for_write(x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>整个流程就是：<br>mmap返回的是一个指针 ，MappedByteBuffer 调用<code>UNSAFE.put</code>方法直接修改堆外内存的值，不经过堆</p>
<h2 id="相关阅读"><a href="#相关阅读" class="headerlink" title="相关阅读"></a>相关阅读</h2><ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_44027353/article/details/121305408">https://blog.csdn.net/qq_44027353/article/details/121305408</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/robothy/p/14223249.html">https://www.cnblogs.com/robothy/p/14223249.html</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://shakudada.xyz/2023/07/30/java-generic/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="dinosaur">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dinosaur">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/07/30/java-generic/" class="post-title-link" itemprop="url">java generic</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-07-30 13:56:58" itemprop="dateCreated datePublished" datetime="2023-07-30T13:56:58+08:00">2023-07-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-10-25 11:42:47" itemprop="dateModified" datetime="2023-10-25T11:42:47+08:00">2023-10-25</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="java的泛型"><a href="#java的泛型" class="headerlink" title="java的泛型"></a>java的泛型</h2><p>java的泛型是什么?<br>泛型是class&#x2F;interface&#x2F;method&#x2F;constructor的一个属性,简单来说是一个修饰符,所以当我们说java的泛型的时候,需要描述4个内容:<code>class/interface/method/constructor</code></p>
<h2 id="java-泛型"><a href="#java-泛型" class="headerlink" title="java 泛型"></a>java 泛型</h2><p>术语表:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>翻译(我自己的翻译)</th>
<th>定义</th>
<th>来源</th>
<th>举例</th>
</tr>
</thead>
<tbody><tr>
<td>parameterized type</td>
<td>参数化类型</td>
<td>A parameterized type is a class or interface type of the form C&lt;T1,…,Tn&gt;, where C is the name of a generic class or interface, and &lt;T1,…,Tn&gt; is a list of type arguments that denote a particular parameterization of the generic class or interface.</td>
<td><a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/specs/jls/se8/html/jls-4.html#jls-4.5">4.5</a></td>
<td>List&lt;String&gt;</td>
</tr>
<tr>
<td>TypeIdentifier</td>
<td>类型标识符</td>
<td>TypeIdentifier is used in the declaration of classes, interfaces,and type parameters (§8.1,§9.1, §4.4), and when referring to types (§6.5)</td>
<td>–</td>
<td></td>
</tr>
<tr>
<td>type variable</td>
<td>类型变量</td>
<td>A type variable is an unqualified identifier used as a type in class, interface, method, and constructor bodies. A type variable is introduced by the declaration of a type parameter of a generic class, interface, method, or constructor (§8.1.2, §9.1.2, §8.4.4, §8.8.4)</td>
<td>$4.4</td>
<td>–</td>
</tr>
</tbody></table>
<h3 id="类型参数和类型变量"><a href="#类型参数和类型变量" class="headerlink" title="类型参数和类型变量"></a>类型参数和类型变量</h3><p>两者的关系:<br>泛型参数由很多东西组成,其中泛型参数可以由泛型变量组成.</p>
<h4 id="类型参数-type-parameter"><a href="#类型参数-type-parameter" class="headerlink" title="类型参数(type parameter)"></a>类型参数(type parameter)</h4><p>类型参数可以由类型变量构成</p>
<h4 id="类变量-type-variable"><a href="#类变量-type-variable" class="headerlink" title="类变量(type variable)"></a>类变量(type variable)</h4><p>类型变量加上一些其他标识符(identifier)可以组成类型参数</p>
<p><strong>什么是类型变量(type variable)</strong>:  </p>
<blockquote>
<p>A type variable is an unqualified identifier used as a type in class, interface, method,<br>and constructor bodies.</p>
</blockquote>
<p>类型变量是作用在类&#x2F;接口&#x2F;方法&#x2F;构造函数的标识符(identifier)</p>
<p>所以得出结论:<br><code>类型变量是标识符</code></p>
<h5 id="类型变量的作用"><a href="#类型变量的作用" class="headerlink" title="类型变量的作用"></a>类型变量的作用</h5><blockquote>
<p>A type variable is introduced by the declaration of a type parameter of a generic<br>class, interface, method, or constructor</p>
</blockquote>
<h5 id="类型参数的作用域-type-parameter-scope"><a href="#类型参数的作用域-type-parameter-scope" class="headerlink" title="类型参数的作用域(type parameter scope)"></a>类型参数的作用域(type parameter scope)</h5><p>分为两部分:<br>作用在类&#x2F;接口是一类,另外一类是作用在构造函数&#x2F;方法的</p>
<p>作用在类上的:</p>
<blockquote>
<p>The scope of a class’s type parameter (§8.1.2) is the type parameter section of<br>the class declaration, and the type parameter section of any superclass type or<br>superinterface type of the class declaration, and the class body. If the class is a<br>NAMES Scope of a Declaration 6.3<br>record class (§8.10), then the scope of the type parameter additionally includes the<br>header of the record declaration (§8.10.1).</p>
</blockquote>
<h3 id="泛型类、接口、方法、构造函数"><a href="#泛型类、接口、方法、构造函数" class="headerlink" title="泛型类、接口、方法、构造函数"></a>泛型类、接口、方法、构造函数</h3><p>关于泛型相关内容，分为四种：</p>
<ul>
<li>泛型类(generic class)</li>
<li>泛型接口(generic interface)</li>
<li>泛型方法(generic method)</li>
<li>泛型构造函数(generic constructor)</li>
</ul>
<p>泛型类：</p>
<blockquote>
<p>A class is generic if the class declaration declares one or more type variables</p>
</blockquote>
<p>泛型构造函数：</p>
<blockquote>
<p>A constructor is generic if it declares one or more type variable</p>
</blockquote>
<p>泛型接口:</p>
<blockquote>
<p>An interface is generic if the interface declaration declares one or more type<br>variables</p>
</blockquote>
<p>泛型构造函数:</p>
<blockquote>
<p>A constructor is generic if it declares one or more type variables</p>
</blockquote>
<h3 id="类型实参-TypeArguments"><a href="#类型实参-TypeArguments" class="headerlink" title="类型实参 TypeArguments"></a>类型实参 TypeArguments</h3><h3 id="类型描述符-TypeIdentifier"><a href="#类型描述符-TypeIdentifier" class="headerlink" title="类型描述符  TypeIdentifier"></a>类型描述符  TypeIdentifier</h3><h2 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h2><p>泛型接口和泛型类是差不多,泛型构造函数和泛型方法是差不多.<br>所以我们只要区分泛型类和泛型方法的区别就行</p>
<h3 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h3><p>java 的实现,我们可以直接看javac的源码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> *  &#123;@literal</span><br><span class="line"> *  TypeParametersOpt = [&quot;&lt;&quot; TypeParameter &#123;&quot;,&quot; TypeParameter&#125; &quot;&gt;&quot;]</span><br><span class="line"> *  &#125;</span><br><span class="line"> */</span><br><span class="line">protected List&lt;JCTypeParameter&gt; typeParametersOpt() &#123;</span><br><span class="line">    return typeParametersOpt(false);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">/**</span><br><span class="line"> *  &#123;@literal</span><br><span class="line"> *  TypeParameter = [Annotations] TypeVariable [TypeParameterBound]</span><br><span class="line"> *  TypeParameterBound = EXTENDS Type &#123;&quot;&amp;&quot; Type&#125;</span><br><span class="line"> *  TypeVariable = Ident</span><br><span class="line"> *  &#125;</span><br><span class="line"> */</span><br><span class="line">JCTypeParameter typeParameter() &#123;</span><br><span class="line">    int pos = token.pos;</span><br><span class="line">    List&lt;JCAnnotation&gt; annos = typeAnnotationsOpt();</span><br><span class="line">    Name name = typeName();</span><br><span class="line">    ListBuffer&lt;JCExpression&gt; bounds = new ListBuffer&lt;&gt;();</span><br><span class="line">    if (token.kind == EXTENDS) &#123;</span><br><span class="line">        nextToken();</span><br><span class="line">        bounds.append(parseType());</span><br><span class="line">        while (token.kind == AMP) &#123;</span><br><span class="line">            nextToken();</span><br><span class="line">            bounds.append(parseType());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return toP(F.at(pos).TypeParameter(name, bounds.toList(), annos));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Name typeName() &#123;</span><br><span class="line">    int pos = token.pos;</span><br><span class="line">    Name name = ident();</span><br><span class="line">    Source source = restrictedTypeNameStartingAtSource(name, pos, true);</span><br><span class="line">    if (source != null) &#123;</span><br><span class="line">        reportSyntaxError(pos, Errors.RestrictedTypeNotAllowed(name, source));</span><br><span class="line">    &#125;</span><br><span class="line">    return name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">protected Name ident(boolean allowClass) &#123;</span><br><span class="line">    if (token.kind == IDENTIFIER) &#123;</span><br><span class="line">        Name name = token.name();</span><br><span class="line">        nextToken();</span><br><span class="line">        return name;</span><br><span class="line">    &#125; else if (token.kind == ASSERT) &#123;</span><br><span class="line">        log.error(DiagnosticFlag.SYNTAX, token.pos, Errors.AssertAsIdentifier);</span><br><span class="line">        nextToken();</span><br><span class="line">        return names.error;</span><br><span class="line">    &#125; else if (token.kind == ENUM) &#123;</span><br><span class="line">        log.error(DiagnosticFlag.SYNTAX, token.pos, Errors.EnumAsIdentifier);</span><br><span class="line">        nextToken();</span><br><span class="line">        return names.error;</span><br><span class="line">    &#125; else if (token.kind == THIS) &#123;</span><br><span class="line">        if (allowThisIdent) &#123;</span><br><span class="line">            Name name = token.name();</span><br><span class="line">            nextToken();</span><br><span class="line">            return name;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            log.error(DiagnosticFlag.SYNTAX, token.pos, Errors.ThisAsIdentifier);</span><br><span class="line">            nextToken();</span><br><span class="line">            return names.error;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; else if (token.kind == UNDERSCORE) &#123;</span><br><span class="line">        if (Feature.UNDERSCORE_IDENTIFIER.allowedInSource(source)) &#123;</span><br><span class="line">            log.warning(token.pos, Warnings.UnderscoreAsIdentifier);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            log.error(DiagnosticFlag.SYNTAX, token.pos, Errors.UnderscoreAsIdentifier);</span><br><span class="line">        &#125;</span><br><span class="line">        Name name = token.name();</span><br><span class="line">        nextToken();</span><br><span class="line">        return name;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        accept(IDENTIFIER);</span><br><span class="line">        if (allowClass &amp;&amp; token.kind == CLASS) &#123;</span><br><span class="line">            nextToken();</span><br><span class="line">            return names._class;</span><br><span class="line">        &#125;</span><br><span class="line">        return names.error;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">main[1] stop in  com.sun.tools.javac.parser.Tokens$Token:315 </span><br><span class="line">Deferring breakpoint com.sun.tools.javac.parser.Tokens$Token:315.</span><br><span class="line">It will be set after the class is loaded.</span><br><span class="line">main[1] cont</span><br><span class="line">&gt; Set deferred breakpoint com.sun.tools.javac.parser.Tokens$Token:315</span><br><span class="line"></span><br><span class="line">Breakpoint hit: &quot;thread=main&quot;, com.sun.tools.javac.parser.Tokens$Token.&lt;init&gt;(), line=315 bci=14</span><br><span class="line">315                this.endPos = endPos;</span><br><span class="line"></span><br><span class="line">main[1] list </span><br><span class="line">311    </span><br><span class="line">312            Token(TokenKind kind, int pos, int endPos, List&lt;Comment&gt; comments) &#123;</span><br><span class="line">313                this.kind = kind;</span><br><span class="line">314                this.pos = pos;</span><br><span class="line">315 =&gt;             this.endPos = endPos;</span><br><span class="line">316                this.comments = comments;</span><br><span class="line">317                checkKind();</span><br><span class="line">318            &#125;</span><br><span class="line">319    </span><br><span class="line">320            Token[] split(Tokens tokens) &#123;</span><br><span class="line">main[1] where</span><br><span class="line">  [1] com.sun.tools.javac.parser.Tokens$Token.&lt;init&gt; (Tokens.java:315)</span><br><span class="line">  [2] com.sun.tools.javac.parser.Tokens.&lt;clinit&gt; (Tokens.java:457)</span><br><span class="line">  [3] com.sun.tools.javac.parser.ParserFactory.&lt;init&gt; (ParserFactory.java:79)</span><br><span class="line">  [4] com.sun.tools.javac.parser.ParserFactory.instance (ParserFactory.java:56)</span><br><span class="line">  [5] com.sun.tools.javac.main.JavaCompiler.&lt;init&gt; (JavaCompiler.java:386)</span><br><span class="line">  [6] com.sun.tools.javac.main.JavaCompiler.instance (JavaCompiler.java:115)</span><br><span class="line">  [7] com.sun.tools.javac.processing.JavacProcessingEnvironment.&lt;init&gt; (JavacProcessingEnvironment.java:215)</span><br><span class="line">  [8] com.sun.tools.javac.processing.JavacProcessingEnvironment.instance (JavacProcessingEnvironment.java:200)</span><br><span class="line">  [9] com.sun.tools.javac.api.BasicJavacTask.initPlugins (BasicJavacTask.java:217)</span><br><span class="line">  [10] com.sun.tools.javac.main.Main.compile (Main.java:292)</span><br><span class="line">  [11] com.sun.tools.javac.main.Main.compile (Main.java:176)</span><br><span class="line">  [12] com.sun.tools.javac.Main.compile (Main.java:64)</span><br><span class="line">  [13] com.sun.tools.javac.Main.main (Main.java:50)</span><br></pre></td></tr></table></figure>


<h3 id="如何调试"><a href="#如何调试" class="headerlink" title="如何调试"></a>如何调试</h3><p>窗口1: </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">##  用javac 编译Hello.java</span><br><span class="line">./java  -agentlib:jdwp=transport=dt_socket,server=y,address=8000  --module jdk.compiler/com.sun.tools.javac.Main    com/Hello.java</span><br></pre></td></tr></table></figure>

<p>窗口2:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">### jdb断点</span><br><span class="line">./jdb -attach 8000 -sourcepath   /var/jdk/src/jdk.compiler/share/classes</span><br><span class="line">### 在jdb中 断点main函数</span><br><span class="line">stop in com.sun.tools.javac.Main.main</span><br><span class="line">### 继续执行 命令是cont , 也可以是continue</span><br><span class="line">continue</span><br></pre></td></tr></table></figure>


<h3 id="泛型方法的代码"><a href="#泛型方法的代码" class="headerlink" title="泛型方法的代码"></a>泛型方法的代码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">class PARA&#123;</span><br><span class="line">    &lt;TT&gt; void test(TT para )&#123;</span><br><span class="line">        System.out.println(para);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>满足了这个parseRule</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">ClassBodyDeclaration =</span><br><span class="line">    &quot;;&quot;</span><br><span class="line">  | [STATIC] Block</span><br><span class="line">  | ModifiersOpt</span><br><span class="line">    ( Type Ident</span><br><span class="line">      ( VariableDeclaratorsRest &quot;;&quot; | MethodDeclaratorRest )</span><br><span class="line">    | VOID Ident VoidMethodDeclaratorRest</span><br><span class="line">    | TypeParameters [Annotations]</span><br><span class="line">      ( Type Ident MethodDeclaratorRest</span><br><span class="line">      | VOID Ident VoidMethodDeclaratorRest</span><br><span class="line">      )</span><br><span class="line">    | Ident ConstructorDeclaratorRest</span><br><span class="line">    | TypeParameters Ident ConstructorDeclaratorRest</span><br><span class="line">    | ClassOrInterfaceOrEnumDeclaration</span><br><span class="line">    *      )</span><br></pre></td></tr></table></figure>

<h3 id="堆栈"><a href="#堆栈" class="headerlink" title="堆栈"></a>堆栈</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">Breakpoint hit: &quot;thread=main&quot;, com.sun.tools.javac.parser.JavacParser.ident(), line=575 bci=0</span><br><span class="line">575            if (token.kind == IDENTIFIER) &#123;</span><br><span class="line"></span><br><span class="line">main[1] print token.name()</span><br><span class="line"> token.name() = &quot;TT&quot;</span><br><span class="line">main[1] where </span><br><span class="line">  [1] com.sun.tools.javac.parser.JavacParser.ident (JavacParser.java:575)</span><br><span class="line">  [2] com.sun.tools.javac.parser.JavacParser.ident (JavacParser.java:571)</span><br><span class="line">  [3] com.sun.tools.javac.parser.JavacParser.typeName (JavacParser.java:3,979)</span><br><span class="line">  [4] com.sun.tools.javac.parser.JavacParser.typeParameter (JavacParser.java:4,563)</span><br><span class="line">  [5] com.sun.tools.javac.parser.JavacParser.typeParametersOpt (JavacParser.java:4,541)</span><br><span class="line">  [6] com.sun.tools.javac.parser.JavacParser.classOrInterfaceOrRecordBodyDeclaration (JavacParser.java:4,277)</span><br><span class="line">  [7] com.sun.tools.javac.parser.JavacParser.classInterfaceOrRecordBody (JavacParser.java:4,214)</span><br><span class="line">  [8] com.sun.tools.javac.parser.JavacParser.classDeclaration (JavacParser.java:3,925)</span><br><span class="line">  [9] com.sun.tools.javac.parser.JavacParser.classOrRecordOrInterfaceOrEnumDeclaration (JavacParser.java:3,866)</span><br><span class="line">  [10] com.sun.tools.javac.parser.JavacParser.typeDeclaration (JavacParser.java:3,855)</span><br><span class="line">  [11] com.sun.tools.javac.parser.JavacParser.parseCompilationUnit (JavacParser.java:3,699)</span><br><span class="line">  [12] com.sun.tools.javac.main.JavaCompiler.parse (JavaCompiler.java:620)</span><br><span class="line">  [13] com.sun.tools.javac.main.JavaCompiler.parse (JavaCompiler.java:657)</span><br><span class="line">  [14] com.sun.tools.javac.main.JavaCompiler.parseFiles (JavaCompiler.java:1,006)</span><br><span class="line">  [15] com.sun.tools.javac.main.JavaCompiler.parseFiles (JavaCompiler.java:993)</span><br><span class="line">  [16] com.sun.tools.javac.main.JavaCompiler.compile (JavaCompiler.java:919)</span><br><span class="line">  [17] com.sun.tools.javac.main.Main.compile (Main.java:317)</span><br><span class="line">  [18] com.sun.tools.javac.main.Main.compile (Main.java:176)</span><br><span class="line">  [19] com.sun.tools.javac.Main.compile (Main.java:64)</span><br><span class="line">  [20] com.sun.tools.javac.Main.main (Main.java:50)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">main[1] print kind </span><br><span class="line"> kind  = &quot;token.identifier&quot;</span><br><span class="line">main[1] print pos </span><br><span class="line"> pos  = 13</span><br><span class="line">main[1] list </span><br><span class="line">311    </span><br><span class="line">312            Token(TokenKind kind, int pos, int endPos, List&lt;Comment&gt; comments) &#123;</span><br><span class="line">313                this.kind = kind;</span><br><span class="line">314                this.pos = pos;</span><br><span class="line">315 =&gt;             this.endPos = endPos;</span><br><span class="line">316                this.comments = comments;</span><br><span class="line">317                checkKind();</span><br><span class="line">318            &#125;</span><br><span class="line">319    </span><br><span class="line">320            Token[] split(Tokens tokens) &#123;</span><br><span class="line">main[1] where </span><br><span class="line">  [1] com.sun.tools.javac.parser.Tokens$Token.&lt;init&gt; (Tokens.java:315)</span><br><span class="line">  [2] com.sun.tools.javac.parser.Tokens$NamedToken.&lt;init&gt; (Tokens.java:399)</span><br><span class="line">  [3] com.sun.tools.javac.parser.JavaTokenizer.readToken (JavaTokenizer.java:1,046)</span><br><span class="line">  [4] com.sun.tools.javac.parser.Scanner.nextToken (Scanner.java:115)</span><br><span class="line">  [5] com.sun.tools.javac.parser.JavacParser.nextToken (JavacParser.java:275)</span><br><span class="line">  [6] com.sun.tools.javac.parser.JavacParser.typeParametersOpt (JavacParser.java:4,540)</span><br><span class="line">  [7] com.sun.tools.javac.parser.JavacParser.classOrInterfaceOrRecordBodyDeclaration (JavacParser.java:4,277)</span><br><span class="line">  [8] com.sun.tools.javac.parser.JavacParser.classInterfaceOrRecordBody (JavacParser.java:4,214)</span><br><span class="line">  [9] com.sun.tools.javac.parser.JavacParser.classDeclaration (JavacParser.java:3,925)</span><br><span class="line">  [10] com.sun.tools.javac.parser.JavacParser.classOrRecordOrInterfaceOrEnumDeclaration (JavacParser.java:3,866)</span><br><span class="line">  [11] com.sun.tools.javac.parser.JavacParser.typeDeclaration (JavacParser.java:3,855)</span><br><span class="line">  [12] com.sun.tools.javac.parser.JavacParser.parseCompilationUnit (JavacParser.java:3,699)</span><br><span class="line">  [13] com.sun.tools.javac.main.JavaCompiler.parse (JavaCompiler.java:620)</span><br><span class="line">  [14] com.sun.tools.javac.main.JavaCompiler.parse (JavaCompiler.java:657)</span><br><span class="line">  [15] com.sun.tools.javac.main.JavaCompiler.parseFiles (JavaCompiler.java:1,006)</span><br><span class="line">  [16] com.sun.tools.javac.main.JavaCompiler.parseFiles (JavaCompiler.java:993)</span><br><span class="line">  [17] com.sun.tools.javac.main.JavaCompiler.compile (JavaCompiler.java:919)</span><br><span class="line">  [18] com.sun.tools.javac.main.Main.compile (Main.java:317)</span><br><span class="line">  [19] com.sun.tools.javac.main.Main.compile (Main.java:176)</span><br><span class="line">  [20] com.sun.tools.javac.Main.compile (Main.java:64)</span><br><span class="line">  [21] com.sun.tools.javac.Main.main (Main.java:50)</span><br></pre></td></tr></table></figure>

<h2 id="相关阅读"><a href="#相关阅读" class="headerlink" title="相关阅读"></a>相关阅读</h2><ul>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/specs/jls/se17/jls17.pdf#page=326&zoom=100,96,713">https://docs.oracle.com/javase/specs/jls/se17/jls17.pdf#page=326&amp;zoom=100,96,713</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://shakudada.xyz/2023/07/16/System-arraycopy-in-java/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="dinosaur">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dinosaur">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/07/16/System-arraycopy-in-java/" class="post-title-link" itemprop="url">System.arraycopy in java</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-07-16 22:24:41" itemprop="dateCreated datePublished" datetime="2023-07-16T22:24:41+08:00">2023-07-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-10-25 11:42:47" itemprop="dateModified" datetime="2023-10-25T11:42:47+08:00">2023-10-25</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>System.arraycopy 是System包下面的函数，主要是从一个数组复制元素到另外一个数组</p>
<p>为什么要介绍一下这个函数呢？<br>因为lucene经常会用到这个函数复制内容</p>
<h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">public static void arraycopy(Object src,</span><br><span class="line">                             int srcPos,</span><br><span class="line">                             Object dest,</span><br><span class="line">                             int destPos,</span><br><span class="line">                             int length)</span><br><span class="line"></span><br><span class="line">Copies an array from the specified source array, beginning at the specified position, to the specified position of the destination array. A subsequence of array components are copied from the source array referenced by src to the destination array referenced by dest. The number of components copied is equal to the length argument. The components at positions srcPos through srcPos+length-1 in the source array are copied into positions destPos through destPos+length-1, respectively, of the destination array.</span><br><span class="line"></span><br><span class="line">If the src and dest arguments refer to the same array object, then the copying is performed as if the components at positions srcPos through srcPos+length-1 were first copied to a temporary array with length components and then the contents of the temporary array were copied into positions destPos through destPos+length-1 of the destination array.</span><br><span class="line"></span><br><span class="line">If dest is null, then a NullPointerException is thrown.</span><br><span class="line"></span><br><span class="line">If src is null, then a NullPointerException is thrown and the destination array is not modified.</span><br><span class="line"></span><br><span class="line">Otherwise, if any of the following is true, an ArrayStoreException is thrown and the destination is not modified:</span><br><span class="line"></span><br><span class="line">    The src argument refers to an object that is not an array.</span><br><span class="line">    The dest argument refers to an object that is not an array.</span><br><span class="line">    The src argument and dest argument refer to arrays whose component types are different primitive types.</span><br><span class="line">    The src argument refers to an array with a primitive component type and the dest argument refers to an array with a reference component type.</span><br><span class="line">    The src argument refers to an array with a reference component type and the dest argument refers to an array with a primitive component type. </span><br><span class="line"></span><br><span class="line">Otherwise, if any of the following is true, an IndexOutOfBoundsException is thrown and the destination is not modified:</span><br><span class="line"></span><br><span class="line">    The srcPos argument is negative.</span><br><span class="line">    The destPos argument is negative.</span><br><span class="line">    The length argument is negative.</span><br><span class="line">    srcPos+length is greater than src.length, the length of the source array.</span><br><span class="line">    destPos+length is greater than dest.length, the length of the destination array. </span><br><span class="line"></span><br><span class="line">Otherwise, if any actual component of the source array from position srcPos through srcPos+length-1 cannot be converted to the component type of the destination array by assignment conversion, an ArrayStoreException is thrown. In this case, let k be the smallest nonnegative integer less than length such that src[srcPos+k] cannot be converted to the component type of the destination array; when the exception is thrown, source array components from positions srcPos through srcPos+k-1 will already have been copied to destination array positions destPos through destPos+k-1 and no other positions of the destination array will have been modified. (Because of the restrictions already itemized, this paragraph effectively applies only to the situation where both arrays have component types that are reference types.)</span><br><span class="line"></span><br><span class="line">Parameters:</span><br><span class="line">    src - the source array.</span><br><span class="line">    srcPos - starting position in the source array.</span><br><span class="line">    dest - the destination array.</span><br><span class="line">    destPos - starting position in the destination data.</span><br><span class="line">    length - the number of array elements to be copied.</span><br><span class="line">Throws:</span><br><span class="line">    IndexOutOfBoundsException - if copying would cause access of data outside array bounds.</span><br><span class="line">    ArrayStoreException - if an element in the src array could not be stored into the dest array because of a type mismatch.</span><br><span class="line">    NullPointerException - if either src or dest is null. </span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://shakudada.xyz/2023/07/13/kmp-correct/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="dinosaur">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dinosaur">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/07/13/kmp-correct/" class="post-title-link" itemprop="url">kmp correct</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-07-13 07:56:47" itemprop="dateCreated datePublished" datetime="2023-07-13T07:56:47+08:00">2023-07-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-10-25 11:42:47" itemprop="dateModified" datetime="2023-10-25T11:42:47+08:00">2023-10-25</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>kmp 算法很多时候很多blog是没有写清楚正确性的证明</p>
<p>论文地址在这里： </p>
<h2 id=""><a href="#" class="headerlink" title=""></a></h2><ul>
<li><a href="https://link.zhihu.com/?target=http://www.cin.ufpe.br/~paguso/courses/if767/bib/KMP_1977.pdf">https://link.zhihu.com/?target=http%3A//www.cin.ufpe.br/~paguso/courses/if767/bib/KMP_1977.pdf</a></li>
<li>[SIAM J. COMPUT.Vol. 6, No. 2, June 1977 FAST PATTERN MATCHING IN STRINGS*]<a target="_blank" rel="noopener" href="https://www.cin.ufpe.br/~paguso/courses/if767/bib/KMP_1977.pdf">https://www.cin.ufpe.br/~paguso/courses/if767/bib/KMP_1977.pdf</a></li>
<li><a target="_blank" rel="noopener" href="https://rgb-24bit.github.io/blog/2020/kmp.html">https://rgb-24bit.github.io/blog/2020/kmp.html</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_26282629/article/details/90202022">https://blog.csdn.net/qq_26282629/article/details/90202022</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://shakudada.xyz/2023/07/10/hidden-and-shadow-in-java/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="dinosaur">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dinosaur">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/07/10/hidden-and-shadow-in-java/" class="post-title-link" itemprop="url">hidden and  shadow in java</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-07-10 15:02:04" itemprop="dateCreated datePublished" datetime="2023-07-10T15:02:04+08:00">2023-07-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-10-25 11:42:47" itemprop="dateModified" datetime="2023-10-25T11:42:47+08:00">2023-10-25</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="shadow"><a href="#shadow" class="headerlink" title="shadow"></a>shadow</h2><p>这个词是描述<code>同一个类</code>里面不同作用范围内的同名变量,越里面的变量越覆盖越外面的同名变量</p>
<p>shadow 会和几个词相关:</p>
<ul>
<li>scope</li>
<li>simple name</li>
</ul>
<p>原则: 在使用simple name的情况下 , scope 里面的会shadow scope外面的</p>
<blockquote>
<p>If the class declares a field with a certain name, then the declaration of that field is said to hide any and all accessible declarations of fields with the same name in superclasses, and superinterfaces of the class.</p>
</blockquote>
<blockquote>
<p>15.11. Field Access Expressions</p>
</blockquote>
<blockquote>
<p>6.2 Names and Identifiers<br>A name is used to refer to an entity declared in a program.<br>There are two forms of names: simple names and qualified names.<br>A simple name is a single identifier.<br>A qualified name consists of a name, a “.” token, and an identifier</p>
</blockquote>
<blockquote>
<p>The scope of a declaration is the region of the program within which the entity<br>declared by the declaration can be referred to using a simple name, provided it is<br>not shadowed (§6.4.1)</p>
</blockquote>
<blockquote>
<p>6.4.1 Shadowing<br>Some declarations may be shadowed in part of their scope by another declaration of<br>the same name, in which case a simple name cannot be used to refer to the declared<br>entity.</p>
</blockquote>
<ul>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/specs/jls/se8/html/jls-8.html#jls-8.4.8">8.4.8. Inheritance, Overriding, and Hiding</a></li>
</ul>
<h2 id="hidden"><a href="#hidden" class="headerlink" title="hidden"></a>hidden</h2><p>hidden描述的父类和子类同名变量的可读性</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://shakudada.xyz/2023/07/05/llvm-ir-%E4%BE%8B%E5%AD%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="dinosaur">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dinosaur">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/07/05/llvm-ir-%E4%BE%8B%E5%AD%90/" class="post-title-link" itemprop="url">llvm ir 例子</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-07-05 09:41:14" itemprop="dateCreated datePublished" datetime="2023-07-05T09:41:14+08:00">2023-07-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-10-25 11:42:47" itemprop="dateModified" datetime="2023-10-25T11:42:47+08:00">2023-10-25</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>在自学编译原理,所以了解了一下后端的内容</p>
<h2 id="llvm-ir"><a href="#llvm-ir" class="headerlink" title="llvm ir"></a>llvm ir</h2><p>llvm ir 会生成这样中间格式的内容,这样就可以交给后端处理了,如果只想自己写前端词法和解析树内容,后端的代码生成和优化都不处理的话,可以生成llvm ir,然后交给llvm ir 处理</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">define i32 @sum(i32 %a, i32 %b) &#123;</span><br><span class="line">  entry:</span><br><span class="line">    %result = add i32 %a, %b</span><br><span class="line">    ret i32 %result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这段代码定义了一个名为sum的函数，它接受两个i32类型的参数%a和%b，并返回它们的和。下面是对代码的逐行解释：</p>
<p><code>define i32 @sum(i32 %a, i32 %b)</code>：这是函数的定义。<br><code>define</code>关键字用于定义函数，<code>i32</code>表示返回类型为32位整数，<code>@sum</code>是函数名，<code>(i32 %a, i32 %b)</code>表示函数接受两个32位整数类型的参数<code>%a</code>和<code>%b</code>。</p>
<p><code>entry:</code>：这是函数的入口标签。在这个简单的例子中，我们只有一个基本块。</p>
<p><code>%result = add i32 %a, %b</code>：这一行使用<code>add</code>指令将参数<code>%a</code>和<code>%b</code>相加，并将结果存储在<code>%result</code>变量中。<code>add</code>指令是LLVM IR中的算术指令之一。</p>
<p><code>ret i32 %result</code>：这一行使用<code>ret</code>指令将<code>%result</code>的值作为函数的返回值。<br>请注意，<code>LLVM IR</code>是一种低级中间表示，它不同于高级语言（如C++或Python）。它具有一种类似汇编语言的结构，但具有更高级别的抽象。LLVM IR具有丰富的指令集和类型系统，可以表示各种编程语言的代码。</p>
<h2 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h2><p>要将LLVM IR转换为汇编代码，您可以使用LLVM工具链中的llc命令。llc是LLVM的静态编译器，它将LLVM IR转换为机器特定的汇编代码。</p>
<p>以下是将LLVM IR生成汇编代码的基本步骤：</p>
<p>编写LLVM IR文件：创建一个文本文件，使用LLVM IR语言编写您的程序代码。将其保存为.ll文件，例如example.ll。</p>
<p>使用llc命令生成汇编代码：打开终端或命令提示符，并导航到您的LLVM安装目录中的bin文件夹。然后运行以下命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">llc -O3 example.ll -o example.s</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>这将使用优化级别<code>3（-O3）</code>将<code>example.ll</code>文件转换为汇编代码，并将结果保存为<code>example.s</code>文件。</p>
<p><img src="https://cdn4.shakudada.xyz/2023/07/b968c3f65c6a64711cf25d559ac16191.png" alt="图片"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://shakudada.xyz/2023/07/04/lucene-%E5%88%86%E8%AF%8D/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="dinosaur">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dinosaur">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/07/04/lucene-%E5%88%86%E8%AF%8D/" class="post-title-link" itemprop="url">lucene 分词</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-07-04 21:54:33" itemprop="dateCreated datePublished" datetime="2023-07-04T21:54:33+08:00">2023-07-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-10-25 11:42:47" itemprop="dateModified" datetime="2023-10-25T11:42:47+08:00">2023-10-25</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>了解分词过程</p>
<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>lucene的查询过程:</p>
<blockquote>
<p> (String  query , String field ) -&gt; Query </p>
</blockquote>
<p>整个过程是将字符串<code>&quot;how old&quot;</code> 切割成一个个<code>Term Query</code></p>
<p>最后会构造成一棵语法树:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">should:[how,old]</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn4.shakudada.xyz/2023/07/3f82dd065ddc3f5085d02223e7d6a805.png" alt="图片"></p>
<h2 id="背景-1"><a href="#背景-1" class="headerlink" title="背景"></a>背景</h2><p>lucene 的分词是一个基本的话题,主要是利用:<code>incrementToken</code> 这个抽象方法以及继承<code>AttributeSource</code> 这个类</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public abstract class TokenStream extends AttributeSource implements Closeable &#123;</span><br><span class="line">  public abstract boolean incrementToken() throws IOException;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="lucene-boolean-clause"><a href="#lucene-boolean-clause" class="headerlink" title="lucene boolean clause"></a>lucene boolean clause</h2><p><a target="_blank" rel="noopener" href="https://www.elastic.co/guide/en/elasticsearch/reference/8.8/query-dsl-bool-query.html">相关阅读</a></p>
<p>lucene 的bolean 子句有四种:</p>
<ul>
<li>MUST</li>
<li>FILTER</li>
<li>SHOULD</li>
<li>MUST_NOT<br><img src="https://cdn4.shakudada.xyz/2023/07/4ec8b62649ef8ace1e50480b162b9f2e.png" alt="子句"></li>
</ul>
<h2 id="堆栈"><a href="#堆栈" class="headerlink" title="堆栈"></a>堆栈</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;init&gt;:202, TermQuery (org.apache.lucene.search)</span><br><span class="line">newTermQuery:640, QueryBuilder (org.apache.lucene.util)</span><br><span class="line">add:408, QueryBuilder (org.apache.lucene.util)</span><br><span class="line">analyzeMultiBoolean:427, QueryBuilder (org.apache.lucene.util)</span><br><span class="line">createFieldQuery:364, QueryBuilder (org.apache.lucene.util)</span><br><span class="line">createFieldQuery:257, QueryBuilder (org.apache.lucene.util)</span><br><span class="line">newFieldQuery:468, QueryParserBase (org.apache.lucene.queryparser.classic)</span><br><span class="line">getFieldQuery:457, QueryParserBase (org.apache.lucene.queryparser.classic)</span><br><span class="line">MultiTerm:680, QueryParser (org.apache.lucene.queryparser.classic)</span><br><span class="line">Query:233, QueryParser (org.apache.lucene.queryparser.classic)</span><br><span class="line">TopLevelQuery:223, QueryParser (org.apache.lucene.queryparser.classic)</span><br><span class="line">parse:136, QueryParserBase (org.apache.lucene.queryparser.classic)</span><br><span class="line">testParse:20, ParseTest (com.dinosaur.lucene.demo)</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="排序算分"><a href="#排序算分" class="headerlink" title="排序算分"></a>排序算分</h2><p><code>BlockMaxMaxscoreScorer</code> 的<code>matches</code>会将所有的分词算出来，然后计算分数总和</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">score:250, BM25Similarity$BM25Scorer (org.apache.lucene.search.similarities)</span><br><span class="line">score:60, LeafSimScorer (org.apache.lucene.search)</span><br><span class="line">score:75, TermScorer (org.apache.lucene.search)</span><br><span class="line">matches:240, BlockMaxMaxscoreScorer$2 (org.apache.lucene.search)</span><br><span class="line">doNext:85, TwoPhaseIterator$TwoPhaseIteratorAsDocIdSetIterator (org.apache.lucene.search)</span><br><span class="line">advance:78, TwoPhaseIterator$TwoPhaseIteratorAsDocIdSetIterator (org.apache.lucene.search)</span><br><span class="line">score:232, BooleanWeight$2 (org.apache.lucene.search)</span><br><span class="line">score:38, BulkScorer (org.apache.lucene.search)</span><br><span class="line">search:776, IndexSearcher (org.apache.lucene.search)</span><br><span class="line">search:694, IndexSearcher (org.apache.lucene.search)</span><br><span class="line">search:688, IndexSearcher (org.apache.lucene.search)</span><br><span class="line">searchAfter:523, IndexSearcher (org.apache.lucene.search)</span><br><span class="line">search:538, IndexSearcher (org.apache.lucene.search)</span><br><span class="line">doPagingSearch:161, SearchFiles (com.dinosaur.lucene.skiptest)</span><br><span class="line">testSearch:131, SearchFiles (com.dinosaur.lucene.skiptest)</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="相关阅读"><a href="#相关阅读" class="headerlink" title="相关阅读"></a>相关阅读</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.amazingkoala.com.cn/Lucene/Search/2018/1211/25.html">query</a></li>
<li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/17cc1ec6d829">https://www.jianshu.com/p/17cc1ec6d829</a></li>
<li><a target="_blank" rel="noopener" href="https://www.amazingkoala.com.cn/Lucene/Search/2020/0916/167.html">https://www.amazingkoala.com.cn/Lucene/Search/2020/0916/167.html</a></li>
<li><a target="_blank" rel="noopener" href="https://www.elastic.co/cn/blog/faster-retrieval-of-top-hits-in-elasticsearch-with-block-max-wand">https://www.elastic.co/cn/blog/faster-retrieval-of-top-hits-in-elasticsearch-with-block-max-wand</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/26/">26</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">dinosaur</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">255</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">73</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/769344359" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;769344359" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/thedinosaurmail@gmail.com" title="E-Mail → thedinosaurmail@gmail.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">dinosaur</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="//cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script>
<script src="//cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js"></script>
<script src="/js/algolia-search.js"></script>














  

  

</body>
</html>
